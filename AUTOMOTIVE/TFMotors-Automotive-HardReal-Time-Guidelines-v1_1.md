# 🚗 TFMotors Automotive Hard Real-Time (HRT) 가이드라인

## **\*문서범위**: 내부용 (Internal Guidelines)\*

**버전**: 1.1 | **발행일**: 2025-11-12 | **승인**: 안전총괄이사
**적용 범위**: 모든 **1차 안전기능 (Primary Safety-Critical Systems)**

> ## ⚠️ **이 스펙을 만족하지 못하면 차량은 즉시 폐차·리콜 대상입니다.**

---

## 1️⃣ 1차 안전기능 1/5 강화 마지노선 (폐차급 기준)

| 시스템                                     | ASIL | 기존 마지노선            | **1/5 강화 마지노선 (폐차급)**                                  | HRT 성격 및 폐차 사유                         |
| :-------------------------------------- | :--: | :----------------- | :----------------------------------------------------- | :------------------------------------- |
| **브레이킹 시스템**<br>(ABS / ESC / AEB 액추에이션) |   D  | < 50 ms / < 200 ms | **≤ 0.2 ms** (INT→Response)<br>**≤ 1 ms** (End-to-End) | **1 ms 초과 → 고속 충돌 필연**                 |
| **스티어링 시스템**<br>(EPS / Steer-by-Wire)   |   D  | < 30 ms            | **≤ 6 ms** (센서→타이어 각도)                                 | 6 ms 지연 → 100 km/h 기준 1.6 m 이탈 → 즉사 위험 |
| **엔진 / 파워트레인 제어**                       |   D  | < 10 ms            | **≤ 2 ms** (연료 분사 / 스로틀)                               | 2 ms 지연 → 가속·제동 불능                     |
| **에어백 배포 시스템**                          |   D  | < 20 ms            | **≤ 4 ms** (Crash→Deploy)                              | 4 ms 지연 → 사망률 90 % 이상 증가               |
| **긴급 차선유지 (ELK)**                       |   D  | < 50 ms            | **≤ 10 ms** (센서→조향 토크)                                 | 10 ms 지연 → 120 km/h 기준 3.3 m 이탈        |
| **고전압 배터리 차단**                          |   D  | < 100 ms           | **≤ 20 ms** (충돌→HV 차단)                                 | 20 ms 지연 → 배터리 화재 및 전소                 |

> 💬 **요약:** 위 항목 중 하나라도 1/5 마지노선을 초과하면, 그 차량은 **도로 주행 불가** 및 **즉시 리콜·폐차** 대상입니다.

---

## 2️⃣ 강화 스펙 달성 필수 조건 (미준수 시 인증 불가)

| 항목                 | 요구사항                                                      | 비고                         |
| ------------------ | --------------------------------------------------------- | -------------------------- |
| **OS**             | AUTOSAR Classic **SC4 + OSEC4** (하드 RT 전용 커널)             | SC1 ~ SC3 금지               |
| **MCU**            | Lockstep Core, **≥ 2000 DMIPS** (Infineon TC397/TC49x 권장) | 단일코어 금지                    |
| **네트워크**           | **TSN Ethernet 1000BASE-T1** 또는 **FlexRay 10 Mbps**       | CAN-FD 사용 시 불합격            |
| **WCET 분석**        | RapiTime + aiT 도구로 **100 % 커버리지 보장**                      | 80 % 이하 → Fail             |
| **런타임 감시**         | SafeTI 또는 RTA-HVR 기반 **상시 데드라인 워치독**                      | 위반 1회 → 즉시 Safe State + 리콜 |
| **RTOS Tick**      | **≤ 100 µs** (최소 10 kHz 스케줄 주기)                           | 1 ms Tick 금지               |
| **INT Latency 측정** | 실측 INT→Response ≤ 0.2 ms 보증                               | Hypervisor 경로 금지           |

---

## 3️⃣ 계층적 안전 모델

| 계층                         | 역할 / 목표          | 대표 기능                | 실시간성 요구                              | ASIL 등급 | 비고                     |
| -------------------------- | ---------------- | -------------------- | ------------------------------------ | ------- | ---------------------- |
| **1차 안전 (Hard RT Domain)** | 생명 보호 / 기본 주행 안전 | Brake, Steer, Airbag | **INT→반응 ≤ 0.2 ms**<br>**루프 ≤ 1 ms** | C ~ D   | Hypervisor 금지, RTOS 전용 |
| **2차 보조 (Soft RT Domain)** | 주행 안정 및 ADAS 보조  | ACC, LKA, ADAS Core  | 10 ~ 100 ms                          | B ~ C   | Hypervisor 허용          |
| **3차 편의 (Non-RT Domain)**  | 인포테인먼트 및 커넥티비티   | IVI, HUD, V2X Link   | > 100 ms                             | QM      | Linux/AP 기반            |

---

## 4️⃣ 설계 및 검증 지침

1. **1차 HRT 영역은 전용 RTOS 또는 MCU 코어에 분리 배치.**
   Hypervisor 및 가상화 스케줄링 사용 금지.
2. **INT→반응 ≤ 0.2 ms, End-to-End ≤ 1 ms** 계약 을 RTE/BSW 수준에서 문서화.
3. **Fail-safe 기계적 우선 + SW 보조** 원칙 유지.
4. **2차·3차 기능이 1차 스케줄에 간섭하지 않도록 하드웨어 자원 격리.**
5. **HRT 기능 위반 감지 즉시 Safe State 진입 → 리콜 및 차량 폐기.**
6. **하드웨어 성능 테스트 (200 µs 내 INT 응답)** 를 모든 생산 라인 EOL 테스트에 포함.
7. **소프트웨어 업데이트(OTA)** 는 1차 도메인 RTOS 세션 중 수행 금지.

---

## 5️⃣ 한 줄 요약 버전별 가이드

| 버전                   | 문구                                                                     | 용도                      | 톤 & 임팩트                   |
| -------------------- | ---------------------------------------------------------------------- | ----------------------- | ------------------------- |
| 💀 **내부 경각심용**       | **“1차 안전기능이 1/5 마지노선을 못 맞추면, 그 차는 도로 위 이동형 관(棺)이다.”**                  | HRT 개발 / 품질보증 내부 경각심 고취 | 기술 실패 = 인명 피해 각성용         |
| 💣 **경영층 보고용 (강화판)** | **“1/5 못 맞추는 순간, 그 차는 도로 위에 굴러다니는 1.5톤짜리 관(棺) + 폭탄 + 리콜 청구서 3000억 이상이다.”** | 이사회 / 투자자 / 리스크 회의      | 경제적·법적 현실 각성, 즉각적 의사결정 유도 |
| 🧭 **공식 발표용 (순화판)**  | **“Primary safety의 1/5 마지노선은 선택이 아닌 생존입니다.”**                          | 외부 세미나 / 정부 보고 / 인증자료   | 공식 커뮤니케이션용, 메시지 일관성 유지    |

---

> 🚨 **결론:**
> 차량은 부서져도 되지만, **탑승자의 생명은 절대 희생될 수 없다.**
> HRT 스펙은 편의 기능의 속도나 스마트함보다 **더 우선되는 생존선**이다.

---

**TFMotors Division. — Safety-Critical Systems Division**

- 문의: trustfarm.info@gmail.com
- (본 문서는 2025-11-12 기준 TFMotors Automotive HRT Guidelines Ver. 1.1 임)
